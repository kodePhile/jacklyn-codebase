<?xml version="1.0"?>
<template name="customerCategory.custOnboarding" description="Customer Onboarding"
	document="customerCategory.custInfo" version="1">
	<messages>
		<message name="awaitCustApproval" description="Awaiting Customer Approval"
			attachment-generator="default-messagegenerator" html="false">
			<subject>Awaiting Customer Approval</subject>
			<body>Awaiting approval for {firstName} {lastName}</body>
		</message>
	</messages>
	<steps>
		<step name="start" description="Start Step" type="start">
			<routings>
				<routing name="routToCreate" description="Route to Create"
					target="createCust" classifier="validAge" />
				<routing name="routToApproval" description="Route to Approval"
					target="custApproval" />
			</routings>
			<enrichments>
				<enrichment name="testEnrichment" description="Test Enrichment"
					logic="testcustomer-enrichmentlogic" />
			</enrichments>
		</step>
		<step name="createCust" description="Create Customer" type="automatic">
			<record-actions>
				<record-action name="createCust" description="Create Customer"
					mapping="custBeanMapping" type="create"/>
			</record-actions>
			<routings>
				<routing name="routToEnd" description="Route to End"
					target="end" />
			</routings>
			<policies>
				<policy name="testOpenAccount" description="Open Account"
					logic="testopenaccount-policylogic" />.
			</policies>
		</step>
		<step name="custApproval" description="Customer Approval"
			participant="all" priority="high" type="interactive">
			<alerts>
				<alert name="awaitApproval" description="Awaiting Approval"
					message="awaitCustApproval" type="system" />
			</alerts>
			<user-actions>
				<user-action name="approveCust" description="Approve Customer"
					label="Approve" target="createCust" notes-requirement="optional" />
				<user-action name="rejectCust" description="Reject Customer"
					label="Reject" target="end" notes-requirement="mandatory" />
			</user-actions>
			<form-privileges>
				<form-privilege type="field" name="licenseNo" editable="false"/>
			</form-privileges>
		</step>
		<step name="end" description="End Step" type="end" />
	</steps>
</template>