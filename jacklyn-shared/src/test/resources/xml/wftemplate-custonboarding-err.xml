<?xml version="1.0"?>
<template name="customerCategory.custOnboarding" description="Customer Onboarding"
	 version="1.0">
	<messages>
		<message name="awaitCustApproval"
			attachment-generator="default-messagegenerator" html="false">
			<body>Awaiting approval for {firstName} {lastName}</body>
		</message>
	</messages>
	<steps>
		<step description="Start Step" type="start">
			<routings>
				<routing name="routToCreate" description="Route to Create"
					target="createCust" classifier="validAge" />
				<routing name="routToApproval" description="Route to Approval"
					target="custApproval" />
				<routing name="routToApproval" description="Route to Approval"
					target="doCustApproval" />
			</routings>
			<enrichments>
				<enrichment name="testEnrichment" description="Test Enrichment" />
			</enrichments>
		</step>
		<step name="createCust" description="Create Customer" type="automatic">
			<record-actions>
				<record-action name="createCust" description="Create Customer"
					mapping="custBeanMapping"/>
			</record-actions>
			<routings>
				<routing name="routToEnd" description="Route to End"
					target="end" />
			</routings>
			<policies>
				<policy description="Open Account"
					logic="testopenaccount-policylogic" />.
			</policies>
		</step>
		<step name="custApproval" description="Customer Approval"
			participant="all" type="interactive">
			<alerts>
				<alert name="awaitApproval" description="Awaiting Approval"
					message="awaitCustApprovalMsg" type="system" />
			</alerts>
			<user-actions>
				<user-action name="approveCust" description="Approve Customer"
					label="Approve" target="createCust" notes-requirement="optional" />
				<user-action name="rejectCust" description="Reject Customer"
					label="Reject" target="doEnd" notes-requirement="mandatory" />
			</user-actions>
			<form-privileges>
				<form-privilege name="licenseNo" editable="false"/>
			</form-privileges>
		</step>
		<step name="end" description="End Step" type="end" />
		<step name="end" description="End Step" type="end" />
	</steps>
</template>