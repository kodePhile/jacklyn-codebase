<?xml version="1.0"?>
<wfcategory name="customerCategory" description="Customer Category"
	version="1">
	<documents>
		<document name="custInfo" description="Customer Information">
			<fields>
				<field name="id" description="Customer ID" type="long"
					multiple="false" />
				<field name="firstName" description="First Name" type="string"
					multiple="false" />
				<field name="lastName" description="Last Name" type="string"
					multiple="false" />
				<field name="age" description="Age" type="integer" multiple="false" />
				<field name="height" description="Height" type="double"
					multiple="false" />
				<field name="accountNo" description="Account Number" type="string"
					multiple="false" />
				<field name="fullName" description="Full Name" type="string"
					multiple="false" />
				<!-- complex-field name="driversLicense" description="Driver's License">
					<field name="licenseNo" description="License No." type="string"/>
					<field name="issueDt" description="Issue Date" type="date"/>
					<field name="expiryDt" description="Expiry Date" type="date"/>
				</complex-field-->
			</fields>
			<classifiers>
				<classifier name="validAge" description="Valid Age">
					<filter field="age" op="between" value1="18" value2="40"
						field-only="false" />
				</classifier>
			</classifiers>
			<attachments>
				<attachment name="birthCert" description="Birth Certificate"
					label="Certificate" type="pdf" />
			</attachments>
			<bean-mappings>
				<bean-mapping name="custBeanMapping" description="Customer Bean Mapping"
					type="primary" bean-type="com.tcdng.jacklyn.common.TestCustomer">
					<field-mapping doc-field="id" bean-field="id" />
					<field-mapping doc-field="firstName" bean-field="firstName" />
					<field-mapping doc-field="lastName" bean-field="lastName" />
					<field-mapping doc-field="age" bean-field="age" />
					<field-mapping doc-field="height" bean-field="height" />
				</bean-mapping>
			</bean-mappings>
		</document>
	</documents>
	<forms>
		<form name="custForm" description="Customer Form" document="custInfo">
			<tabs>
				<tab name="main" description="Main Tab" label="Main" pseudo="true">
					<sections>
						<section name="basicDetails" description="Basic Details">
							<field binding="firstName" editor="!ui-text" label="First Name"
								required="true" />
							<field binding="lastName" editor="!ui-text" label="Last Name"
								required="true" />
							<field binding="age" editor="!ui-integer" label="Age"
								required="true" />
							<field binding="height" editor="!ui-decimal" label="Height"
								required="true" />
						</section>
						<!-- section name="licenseDetails" description="License Details"
							binding="driversLicense">
							<field binding="licenseNo" editor="!ui-text" label="License No."
								required="true" />
							<field binding="issueDt" editor="!ui-date" label="Issue Date"
								required="true" />
							<field binding="expiryDt" editor="!ui-date" label="Expiry Date"
								required="true" />
						</section-->
					</sections>
				</tab>
			</tabs>
		</form>
	</forms>
	<messages>
		<message name="awaitCustApproval" description="Awaiting Customer Approval"
			attachment-generator="default-attachmentgenerator" html="false">
			<subject>Awaiting Customer Approval</subject>
			<body>Awaiting approval for {firstName} {lastName}</body>
		</message>
	</messages>
	<templates>
		<template name="custOnboarding" description="Customer Onboarding"
			document="custInfo">
			<item-description>Customer:{firstName} {lastName}</item-description>
			<step name="start" description="Start Step" type="start">
				<routings>
					<routing name="routToCreate" description="Route to Create"
						target="createCust" classifier="validAge" />
					<routing name="routToApproval" description="Route to Approval"
						target="custApproval" />
				</routings>
				<enrichments>
					<enrichment name="testEnrichment" description="Test Enrichment"
						logic="testcustomer-enrichmentlogic" />
				</enrichments>
			</step>
			<step name="createCust" description="Create Customer" type="automatic">
				<record-actions>
					<record-action name="createCust" description="Create Customer"
						mapping="custBeanMapping" type="create" />
				</record-actions>
				<routings>
					<routing name="routToEnd" description="Route to End"
						target="end" />
				</routings>
				<policies>
					<policy name="testOpenAccount" description="Open Account"
						logic="testopenaccount-policylogic" />
				</policies>
			</step>
			<step name="custApproval" description="Customer Approval"
				participant="all" priority="high" form="custForm" type="interactive">
				<alerts>
					<alert name="awaitApproval" description="Awaiting Approval"
						message="awaitCustApproval" type="system" />
				</alerts>
				<user-actions>
					<user-action name="approveCust" description="Approve Customer"
						label="Approve" target="createCust" notes-requirement="optional" />
					<user-action name="rejectCust" description="Reject Customer"
						label="Reject" target="end" notes-requirement="mandatory" />
				</user-actions>
			</step>
			<step name="end" description="End Step" type="end" />
		</template>
	</templates>
</wfcategory>